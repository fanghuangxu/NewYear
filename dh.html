<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 é©¬å¹´åŠ¨ç”» | çƒ‚æ¼«åºæ›²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body, html {
            width: 100%;
            height: 100%;
            background-color: #020205;
            overflow: hidden;
            font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        #stage-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        .anim-title {
            font-size: 0;
            opacity: 0;
            transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 900;
            letter-spacing: 8px;
            margin: 0;
            white-space: nowrap;
            transform-style: preserve-3d;
        }

        .anim-subtitle {
            font-size: 0;
            opacity: 0;
            color: rgba(255, 255, 255, 0.85);
            margin-top: 20px;
            font-weight: 300;
            letter-spacing: 4px;
            transition: all 1.4s cubic-bezier(0.16, 1, 0.3, 1);
            text-shadow: 0 0 20px rgba(0, 200, 255, 0.6);
        }

        /* è¿›åº¦æ¡ */
        #progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                #ff0000, #ff7f00, #ffff00, 
                #00ff00, #00ffff, #0000ff, 
                #8b00ff, #ff0000);
            background-size: 200% 100%;
            animation: gradientMove 3s linear infinite;
            width: 0%;
            z-index: 20;
            box-shadow: 0 0 15px rgba(255,255,255,0.4);
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        /* æ§åˆ¶æŒ‰é’® */
        #replay-btn {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: rgba(255, 255, 255, 0.9);
            cursor: pointer;
            z-index: 20;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 30px;
            font-size: 14px;
            letter-spacing: 3px;
            backdrop-filter: blur(10px);
        }
        
        #replay-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-50%) translateY(0);
            box-shadow: 0 5px 25px rgba(255,255,255,0.2);
        }

        #replay-btn.visible {
            opacity: 1;
            pointer-events: auto;
        }

        /* äº¤äº’æç¤º */
        #interaction-hint {
            position: absolute;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.5);
            font-size: 13px;
            letter-spacing: 2px;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 15;
            pointer-events: none;
        }

        /* èƒŒæ™¯æ˜Ÿç©ºå±‚ */
        #starfield {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: var(--min-opacity); transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
    </style>
</head>
<body>

    <div id="starfield"></div>
    
    <canvas id="canvas"></canvas>

    <div id="stage-container">
        <h1 class="anim-title" id="main-title"></h1>
        <p class="anim-subtitle" id="sub-title"></p>
    </div>

    <div id="progress-bar"></div>
    <div id="interaction-hint">ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ç‡ƒæ”¾çƒŸèŠ±</div>
    <div id="replay-btn">â†º é‡æ’­åŠ¨ç”»</div>

    <script>
        // ==========================================
        // 0. åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
        // ==========================================
        function createStarfield() {
            const starfield = document.getElementById('starfield');
            const starCount = 150;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = (Math.random() * 2 + 1) + 'px';
                star.style.setProperty('--duration', (Math.random() * 3 + 2) + 's');
                star.style.setProperty('--min-opacity', Math.random() * 0.3 + 0.1);
                star.style.animationDelay = Math.random() * 5 + 's';
                starfield.appendChild(star);
            }
        }
        createStarfield();

        // ==========================================
        // 1. æ ¸å¿ƒæ¸²æŸ“å¼•æ“
        // ==========================================
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // ç²’å­ç³»ç»Ÿ
        const particles = [];
        const MAX_PARTICLES = 2500;

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.active = false;
                this.x = 0; this.y = 0;
                this.vx = 0; this.vy = 0;
                this.ax = 0; this.ay = 0;
                this.life = 0; this.maxLife = 0;
                this.color = '#fff';
                this.size = 0;
                this.type = '';
                this.alpha = 1;
                this.rotation = 0;
                this.rotationSpeed = 0;
            }
        }

        function getParticle() {
            let p = particles.find(p => !p.active);
            if (!p && particles.length < MAX_PARTICLES) {
                p = new Particle();
                particles.push(p);
            }
            if (p) {
                p.reset();
                p.active = true;
            }
            return p;
        }

        // é¢„å®šä¹‰çƒŸèŠ±é¢œè‰²è°ƒè‰²æ¿
        const FIREWORK_COLORS = [
            { main: '#FFD700', secondary: '#FFA500', glow: '#FFB700' },  // é‡‘è‰²
            { main: '#FF4500', secondary: '#FF6347', glow: '#FF5A36' },  // æ©™çº¢
            { main: '#FF69B4', secondary: '#FF1493', glow: '#FF69B4' },  // ç²‰çº¢
            { main: '#00FFFF', secondary: '#00CED1', glow: '#48D1CC' },  // é’è‰²
            { main: '#7FFF00', secondary: '#32CD32', glow: '#90EE90' },  // ç»¿è‰²
            { main: '#9400D3', secondary: '#8A2BE2', glow: '#9932CC' },  // ç´«è‰²
            { main: '#FF0000', secondary: '#FF3366', glow: '#FF0033' },  // çº¢è‰²
        ];

        // ==========================================
        // 2. åŠ¨ç”»å¯¼æ¼”ç³»ç»Ÿ
        // ==========================================
        const ELEMENTS = {
            progressBar: document.getElementById('progress-bar'),
            mainTitle: document.getElementById('main-title'),
            subTitle: document.getElementById('sub-title'),
            replayBtn: document.getElementById('replay-btn'),
            hint: document.getElementById('interaction-hint')
        };

        let startTime = null;
        let animationEnded = false;
        let currentSceneIndex = -1;
        
        // æ ¹æ®ç”¨æˆ·éœ€æ±‚é…ç½®çš„åœºæ™¯
        const SCENES = [
            // åˆå§‹çŠ¶æ€
            { time: 0, action: 'init' },
            
            // ç¬¬ä¸€å¹•ï¼šéƒ½åŒ–ä½œäº†æ˜Ÿè¾°
            { time: 500, action: 'title', text: 'éƒ½åŒ–ä½œäº†æ˜Ÿè¾°', size: '4.5rem', effect: 'fadeInUp' },
            { time: 500, action: 'subtitle', text: 'ç…§äº®å‰è¡Œçš„å¤œ', size: '1.8rem' },
            { time: 1500, action: 'pause' },
            { time: 2500, action: 'fadeout' },
            
            // ç¬¬äºŒå¹•ï¼šä¸è´ŸéŸ¶å
            { time: 3000, action: 'title', text: 'ä¸è´ŸéŸ¶å', size: '5rem', effect: 'fadeInUp' },
            { time: 3000, action: 'subtitle', text: 'ä¸è´Ÿå¿ƒä¸­çƒ­è¡€', size: '2rem' },
            { time: 3800, action: 'pause' },
            { time: 4800, action: 'fadeout' },
            
            // ç¬¬ä¸‰å¹•ï¼šå¥”é©¬ + ä¸€å¾€æ— å‰
            { time: 5300, action: 'title', text: 'ğŸ', size: '6rem', effect: 'gallop' },
            { time: 6000, action: 'title', text: 'ä¸€å¾€æ— å‰', size: '4.5rem', color: '#FF4500', style: 'bold' },
            { time: 6500, action: 'pause' },
            { time: 7500, action: 'fadeout' },
            
            // ç¬¬å››å¹•ï¼šä½ å¥½ï¼Œ2026
            { time: 8000, action: 'title', text: 'ä½ å¥½ï¼Œ2026', size: '4.5rem', effect: 'fadeInUp' },
            { time: 8000, action: 'subtitle', text: 'è®©æˆ‘ä»¬ä»¥æ­¤ä¸ºåº', size: '1.8rem' },
            { time: 9200, action: 'title', text: 'å¥”èµ´ä¸‹ä¸€åœºå±±æµ·', size: '3.8rem', color: '#00BFFF', effect: 'fadeUp' },
            { time: 10500, action: 'pause' },
            { time: 11200, action: 'fadeout' },
            
            // ç¬¬äº”å¹•ï¼šæ–°å¹´å¿«ä¹ + çƒŸèŠ±
            { time: 11700, action: 'firework', color: 'random' },
            { time: 12200, action: 'title', text: 'æ–°å¹´å¿«ä¹', size: '6.5rem', color: '#FFD700', effect: 'scaleIn' },
            { time: 12200, action: 'subtitle', text: 'ä¸‡äº‹é¡ºé‚ï¼Œçš†å¾—æ‰€æ„¿', size: '2.2rem' },
            { time: 13000, action: 'firework', color: 'random' },
            { time: 14000, action: 'firework', color: 'random' },
            { time: 15000, action: 'firework', color: 'random' },
            { time: 16000, action: 'firework', color: 'random' },
            { time: 17000, action: 'firework', color: 'random' },
            
            // è¿›å…¥äº¤äº’æ¨¡å¼
            { time: 18000, action: 'enableInteraction' },
            { time: 18500, action: 'showReplayBtn' },
            { time: 20000, action: 'autoFireworksStart' },
            
            // ç»“æŸ
            { time: 22000, action: 'end' }
        ];

        function runDirector(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            const totalDuration = 22000;

            // æ›´æ–°è¿›åº¦æ¡
            const progress = Math.min((elapsed / totalDuration) * 100, 100);
            ELEMENTS.progressBar.style.width = `${progress}%`;

            // æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰§è¡Œæ–°çš„åœºæ™¯
            while (currentSceneIndex < SCENES.length - 1 && 
                   elapsed >= SCENES[currentSceneIndex + 1].time) {
                currentSceneIndex++;
                executeScene(SCENES[currentSceneIndex]);
            }

            // è‡ªåŠ¨ç”Ÿæˆç²’å­
            if (elapsed > 2000 && elapsed < 4800) {
                // ç¬¬ä¸€å¹•ï¼šæ˜Ÿå…‰ç‚¹ç‚¹
                if (Math.random() < 0.08) spawnSparkle();
            } else if (elapsed > 5300 && elapsed < 7500) {
                // ç¬¬ä¸‰å¹•ï¼šé©¬è¹„å°˜åœŸ
                if (Math.random() < 0.2) spawnDustBurst();
            } else if (elapsed > 11700 && elapsed < 17000) {
                // ç¬¬äº”å¹•ï¼šè‡ªåŠ¨çƒŸèŠ±
                if (Math.random() < 0.12) spawnAutoFirework();
            } else if (elapsed > 20000) {
                // äº¤äº’é˜¶æ®µï¼šèƒŒæ™¯çƒŸèŠ±
                if (Math.random() < 0.06) spawnAutoFirework();
            }

            // æ£€æŸ¥ç»“æŸ
            if (elapsed >= totalDuration && !animationEnded) {
                animationEnded = true;
            }

            if (!animationEnded) {
                requestAnimationFrame(runDirector);
            }
        }

        // ==========================================
        // 3. åœºæ™¯åŠ¨ä½œæ‰§è¡Œå™¨
        // ==========================================
        function executeScene(scene) {
            const { mainTitle, subTitle } = ELEMENTS;

            switch (scene.action) {
                case 'init':
                    // æ¸…ç©ºæ‰€æœ‰å…ƒç´ 
                    mainTitle.style.fontSize = '0';
                    subTitle.style.fontSize = '0';
                    mainTitle.style.opacity = '0';
                    subTitle.style.opacity = '0';
                    break;

                case 'title':
                    if (scene.text) {
                        mainTitle.innerText = scene.text;
                        mainTitle.style.fontSize = scene.size || '4rem';
                        mainTitle.style.color = scene.color || '#fff';
                        mainTitle.style.fontWeight = scene.style || '900';
                        mainTitle.style.opacity = '1';
                        
                        // åº”ç”¨ç‰¹æ•ˆ
                        applyEffect(mainTitle, scene.effect || 'fadeInUp');
                    }
                    break;

                case 'subtitle':
                    if (scene.text) {
                        subTitle.innerText = scene.text;
                        subTitle.style.fontSize = scene.size || '1.8rem';
                        subTitle.style.opacity = '1';
                        applyEffect(subTitle, 'fadeInUp');
                    }
                    break;

                case 'fadeout':
                    mainTitle.style.opacity = '0';
                    subTitle.style.opacity = '0';
                    break;

                case 'pause':
                    // æš‚åœæ•ˆæœé€šè¿‡CSS transitionå®ç°
                    break;

                case 'firework':
                    const x = width * (0.3 + Math.random() * 0.4);
                    const y = height * (0.3 + Math.random() * 0.3);
                    createExplosion(x, y, scene.color);
                    break;

                case 'enableInteraction':
                    ELEMENTS.hint.style.opacity = '1';
                    break;

                case 'showReplayBtn':
                    ELEMENTS.replayBtn.classList.add('visible');
                    break;

                case 'autoFireworksStart':
                    // åœ¨ä¸»å¾ªç¯ä¸­è‡ªåŠ¨è§¦å‘
                    break;

                case 'end':
                    // åŠ¨ç”»ç»“æŸï¼Œè¿›å…¥äº¤äº’æ¨¡å¼
                    break;
            }
        }

        function applyEffect(element, effect) {
            // é‡ç½®å˜æ¢
            element.style.transform = '';
            
            switch (effect) {
                case 'fadeInUp':
                    element.style.transform = 'translateY(30px)';
                    setTimeout(() => {
                        element.style.transform = 'translateY(0)';
                    }, 50);
                    break;
                    
                case 'scaleIn':
                    element.style.transform = 'scale(0.5)';
                    element.style.opacity = '0';
                    setTimeout(() => {
                        element.style.transform = 'scale(1)';
                        element.style.opacity = '1';
                    }, 50);
                    break;
                    
                case 'gallop':
                    // é©¬çš„å¥”è·‘åŠ¨ç”»
                    element.style.transform = 'scale(1.2)';
                    element.style.filter = 'drop-shadow(0 0 20px rgba(255,215,0,0.8))';
                    let gallopCount = 0;
                    const gallopInterval = setInterval(() => {
                        gallopCount++;
                        const scale = 1.2 + Math.sin(gallopCount * 0.3) * 0.1;
                        element.style.transform = `scale(${scale})`;
                        if (gallopCount > 15) {
                            clearInterval(gallopInterval);
                        }
                    }, 80);
                    break;
                    
                case 'fadeUp':
                    element.style.transform = 'translateY(20px)';
                    element.style.opacity = '0.8';
                    setTimeout(() => {
                        element.style.transform = 'translateY(0)';
                        element.style.opacity = '1';
                    }, 50);
                    break;
            }
        }

        // ==========================================
        // 4. ç²’å­ç”Ÿæˆç³»ç»Ÿ
        // ==========================================
        function spawnSparkle() {
            let p = getParticle();
            if (!p) return;
            
            p.type = 'sparkle';
            p.x = Math.random() * width;
            p.y = Math.random() * height;
            p.vx = (Math.random() - 0.5) * 0.5;
            p.vy = (Math.random() - 0.5) * 0.5;
            p.life = 120 + Math.random() * 60;
            p.maxLife = p.life;
            p.size = Math.random() * 2 + 1;
            p.color = `hsla(${Math.random() * 60 + 200}, 80%, 80%, 0.8)`;
        }

        function spawnDustBurst() {
            const centerX = width / 2 + (Math.random() - 0.5) * width * 0.3;
            const centerY = height * 0.6;
            const count = 8 + Math.floor(Math.random() * 8);
            
            for (let i = 0; i < count; i++) {
                let p = getParticle();
                if (!p) return;
                
                p.type = 'dust';
                p.x = centerX;
                p.y = centerY;
                const angle = Math.random() * Math.PI - Math.PI / 2;
                const speed = Math.random() * 3 + 1;
                p.vx = Math.cos(angle) * speed;
                p.vy = Math.sin(angle) * speed - 2;
                p.life = 80 + Math.random() * 40;
                p.maxLife = p.life;
                p.size = Math.random() * 4 + 2;
                p.color = `hsla(${30 + Math.random() * 20}, 70%, 60%, 0.6)`;
            }
        }

        function spawnAutoFirework() {
            const x = width * (0.2 + Math.random() * 0.6);
            const y = height * (0.25 + Math.random() * 0.4);
            createExplosion(x, y, 'random');
        }

        function createExplosion(x, y, color = 'random') {
            const colorScheme = color === 'random' 
                ? FIREWORK_COLORS[Math.floor(Math.random() * FIREWORK_COLORS.length)]
                : FIREWORK_COLORS[0]; // é»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªé…è‰²
            
            const particleCount = 120 + Math.floor(Math.random() * 60);
            
            // ä¸»çˆ†ç‚¸ç²’å­
            for (let i = 0; i < particleCount; i++) {
                let p = getParticle();
                if (!p) return;
                
                p.type = 'firework';
                p.x = x;
                p.y = y;
                
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 8 + 2;
                p.vx = Math.cos(angle) * speed;
                p.vy = Math.sin(angle) * speed;
                p.ax = 0;
                p.ay = 0.08; // é‡åŠ›
                
                p.life = 100 + Math.random() * 40;
                p.maxLife = p.life;
                
                // éšæœºåˆ†é…é¢œè‰²
                const useMainColor = Math.random() > 0.3;
                p.color = useMainColor ? colorScheme.main : colorScheme.secondary;
                p.size = Math.random() * 3 + 1;
                p.alpha = 1;
                
                // æ—‹è½¬æ•ˆæœï¼ˆç”¨äºå¿ƒå½¢ç­‰ç‰¹æ®Šå½¢çŠ¶ï¼‰
                p.rotation = 0;
                p.rotationSpeed = (Math.random() - 0.5) * 0.1;
            }
            
            // æ·»åŠ é—ªå…‰ç²’å­
            const flashCount = 20;
            for (let i = 0; i < flashCount; i++) {
                let p = getParticle();
                if (!p) return;
                
                p.type = 'flash';
                p.x = x + (Math.random() - 0.5) * 50;
                p.y = y + (Math.random() - 0.5) * 50;
                p.vx = (Math.random() - 0.5) * 2;
                p.vy = (Math.random() - 0.5) * 2;
                p.life = 30 + Math.random() * 20;
                p.maxLife = p.life;
                p.color = '#fff';
                p.size = Math.random() * 2 + 1;
            }
        }

        // ç‚¹å‡»äº¤äº’
        document.addEventListener('click', (e) => {
            // ç¡®ä¿ä¸è§¦å‘é‡æ’­æŒ‰é’®çš„ç‚¹å‡»
            if (e.target === ELEMENTS.replayBtn) return;
            
            createExplosion(e.clientX, e.clientY, 'random');
        });

        // é‡æ’­æŒ‰é’®
        ELEMENTS.replayBtn.addEventListener('click', () => {
            location.reload();
        });

        // ==========================================
        // 5. æ¸²æŸ“ä¸»å¾ªç¯
        // ==========================================
        function loop(timestamp) {
            // æ‹–å°¾æ•ˆæœ
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(0, 0, 0, 0.12)';
            ctx.fillRect(0, 0, width, height);
            
            // ç»˜åˆ¶ç²’å­
            ctx.globalCompositeOperation = 'lighter';
            
            particles.forEach(p => {
                if (!p.active) return;
                
                // ç‰©ç†æ›´æ–°
                if (p.type === 'firework' || p.type === 'flash') {
                    p.vx += p.ax;
                    p.vy += p.ay;
                    p.x += p.vx;
                    p.y += p.vy;
                    
                    // é˜»åŠ›
                    p.vx *= 0.97;
                    p.vy *= 0.97;
                    
                } else if (p.type === 'sparkle' || p.type === 'dust') {
                    p.x += p.vx;
                    p.y += p.vy;
                }
                
                p.life--;
                if (p.life <= 0) {
                    p.active = false;
                    return;
                }
                
                // è®¡ç®—é€æ˜åº¦
                const lifeRatio = p.life / p.maxLife;
                p.alpha = lifeRatio;
                
                // ç»˜åˆ¶
                ctx.globalAlpha = p.alpha;
                ctx.fillStyle = p.color;
                
                if (p.type === 'firework') {
                    // å°¾è¿¹æ•ˆæœ
                    const trailLength = 3;
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(p.x - p.vx * trailLength, p.y - p.vy * trailLength);
                    ctx.strokeStyle = p.color;
                    ctx.lineWidth = p.size;
                    ctx.lineCap = 'round';
                    ctx.stroke();
                    
                    // ç²’å­å…‰æ™•
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 1.5, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.globalAlpha = p.alpha * 0.3;
                    ctx.fill();
                    
                } else {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            requestAnimationFrame(loop);
        }

        // å¯åŠ¨ç³»ç»Ÿ
        requestAnimationFrame(runDirector);
        requestAnimationFrame(loop);

    </script>
</body>
</html>
