<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 é©¬å¹´åŠ¨ç”» | çƒ‚æ¼«åºæ›²</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #020205; /* ææ·±è“é»‘ */
            overflow: hidden;
            font-family: "Microsoft YaHei", sans-serif;
        }

        /* å…¨å±ç”»å¸ƒ */
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* å‰§åœºæ–‡å­—å±‚ */
        #stage-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            pointer-events: none;
            width: 100%;
        }

        /* åŠ¨ç”»çŠ¶æ€ä¸‹çš„æ–‡å­—é€šç”¨æ ·å¼ */
        .anim-title {
            font-size: 0px; /* åˆå§‹éšè— */
            opacity: 0;
            transition: all 1s cubic-bezier(0.22, 1, 0.36, 1);
            font-weight: 900;
            letter-spacing: 10px;
            margin: 0;
        }

        .anim-subtitle {
            font-size: 0px;
            opacity: 0;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 20px;
            font-weight: 300;
            transition: all 1.2s ease-out;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }

        /* è¿›åº¦æ¡ */
        #progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
            width: 0%;
            z-index: 20;
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }

        /* æ§åˆ¶æŒ‰é’®ï¼ˆåŠ¨ç”»ç»“æŸåæ˜¾ç¤ºï¼‰ */
        #replay-btn {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 25px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: white;
            cursor: pointer;
            z-index: 20;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s;
            border-radius: 20px;
            font-size: 14px;
            letter-spacing: 2px;
        }
        #replay-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

    </style>
</head>
<body>

    <canvas id="canvas"></canvas>

    <div id="stage-text">
        <h1 class="anim-title" id="main-title"></h1>
        <p class="anim-subtitle" id="sub-title"></p>
    </div>

    <div id="progress-bar"></div>
    <div id="replay-btn" onclick="location.reload()">â†º é‡æ’­åŠ¨ç”»</div>

    <script>
        // ==========================================
        // 1. æ ¸å¿ƒæ¸²æŸ“å¼•æ“ (Canvas & Physics)
        // ==========================================
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let width, height;

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // ç²’å­æ± 
        const particles = [];
        const MAX_PARTICLES = 1000;

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.active = false;
                this.x = 0; this.y = 0;
                this.vx = 0; this.vy = 0;
                this.life = 0; this.color = '#fff';
                this.size = 0; this.type = '';
            }
        }

        // è·å–ç©ºé—²ç²’å­
        function getParticle() {
            let p = particles.find(p => !p.active);
            if (!p && particles.length < MAX_PARTICLES) {
                p = new Particle();
                particles.push(p);
            }
            if (p) p.active = true;
            return p;
        }

        // ==========================================
        // 2. åŠ¨ç”»å¯¼æ¼”ç³»ç»Ÿ
        // ==========================================
        let startTime = null;
        let animationEnded = false;
        const TOTAL_DURATION = 22000; // åŠ¨ç”»æ€»æ—¶é•¿ 22ç§’
        const progressBar = document.getElementById('progress-bar');
        const mainTitle = document.getElementById('main-title');
        const subTitle = document.getElementById('sub-title');
        const replayBtn = document.getElementById('replay-btn');

        // åœºæ™¯é…ç½®
        const SCENES = [
            { time: 0, action: 'init' },
            { time: 1000, action: 'title', text: '2026', size: '5rem' },
            { time: 3000, action: 'title', text: 'ğŸ', size: '6rem' },
            { time: 5000, action: 'clear' },
            { time: 6000, action: 'glowText', text: 'é©¬å¹´', color: '#FFD700' },
            { time: 10000, action: 'clear' },
            { time: 11000, action: 'finalText', main: '2026 é©¬å¹´', sub: 'æ„¿æ¢¦æƒ³å¦‚çƒŸèŠ±èˆ¬ç»šçƒ‚' },
            { time: 12000, action: 'fireworksStart' },
            { time: 20000, action: 'stopAutoFireworks' },
            { time: 22000, action: 'end' }
        ];

        function runDirector(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;

            // æ›´æ–°è¿›åº¦æ¡
            const progress = Math.min((elapsed / TOTAL_DURATION) * 100, 100);
            progressBar.style.width = `${progress}%`;

            // æ‰§è¡Œåœºæ™¯æŒ‡ä»¤
            SCENES.forEach(scene => {
                if (Math.abs(elapsed - scene.time) < 20) { // è§¦å‘æ—¶æœºå®½å®¹åº¦
                    executeScene(scene);
                }
            });

            // è‡ªåŠ¨ç”Ÿæˆç²’å­é€»è¾‘ (æ ¹æ®æ—¶é—´è½´æ§åˆ¶å¯†åº¦)
            if (elapsed > 2000 && elapsed < 5000) {
                // æµæ˜Ÿ
                if(Math.random() < 0.1) spawnMeteor();
            } else if (elapsed > 5000 && elapsed < 10000) {
                // é™æ€å…‰å°˜
                if(Math.random() < 0.3) spawnDust();
            } else if (elapsed > 12000 && !animationEnded) {
                // ç››å¤§çƒŸèŠ±
                if(Math.random() < 0.15) spawnAutoFirework();
            }

            // æ£€æŸ¥ç»“æŸ
            if (elapsed > TOTAL_DURATION && !animationEnded) {
                animationEnded = true;
                replayBtn.style.opacity = 1;
                replayBtn.style.pointerEvents = 'auto';
                subTitle.innerText = "ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®ç‡ƒæ”¾æ–°å¹´çƒŸç«";
                subTitle.style.opacity = 1;
                subTitle.style.fontSize = "1.2rem";
            }

            requestAnimationFrame(loop);
        }

        // ==========================================
        // 3. åœºæ™¯åŠ¨ä½œå®ç°
        // ==========================================
        function executeScene(scene) {
            switch(scene.action) {
                case 'title':
                    mainTitle.innerText = scene.text;
                    mainTitle.style.fontSize = scene.size;
                    mainTitle.style.opacity = 1;
                    mainTitle.style.transform = "scale(1.2)";
                    setTimeout(() => mainTitle.style.transform = "scale(1)", 500);
                    break;
                case 'clear':
                    mainTitle.style.opacity = 0;
                    subTitle.style.opacity = 0;
                    break;
                case 'glowText':
                    mainTitle.innerText = scene.text;
                    mainTitle.style.fontSize = "6rem";
                    mainTitle.style.color = scene.color;
                    mainTitle.style.textShadow = `0 0 50px ${scene.color}`;
                    mainTitle.style.opacity = 1;
                    break;
                case 'finalText':
                    mainTitle.innerText = scene.main;
                    mainTitle.style.fontSize = "4.5rem";
                    mainTitle.style.background = "linear-gradient(120deg, #ff0000, #ffff00, #00ff88, #0088ff)";
                    mainTitle.style.webkitBackgroundClip = "text";
                    mainTitle.style.color = "transparent";
                    mainTitle.style.opacity = 1;
                    
                    subTitle.innerText = scene.sub;
                    subTitle.style.opacity = 1;
                    subTitle.style.fontSize = "2rem";
                    break;
                case 'fireworksStart':
                    // é€»è¾‘åœ¨ loop ä¸­å¤„ç†
                    break;
                case 'end':
                    // é€»è¾‘åœ¨ loop ä¸­å¤„ç†
                    break;
            }
        }

        // ==========================================
        // 4. ç²’å­ç”Ÿæˆå™¨
        // ==========================================
        function spawnMeteor() {
            let p = getParticle();
            if(!p) return;
            p.type = 'meteor';
            p.x = Math.random() * width;
            p.y = 0;
            p.vx = (Math.random() - 0.5) * 2;
            p.vy = Math.random() * 10 + 5;
            p.life = 60;
            p.maxLife = 60;
            p.size = 2;
            p.color = '#fff';
        }

        function spawnDust() {
            let p = getParticle();
            if(!p) return;
            p.type = 'dust';
            p.x = Math.random() * width;
            p.y = Math.random() * height;
            p.vx = (Math.random() - 0.5) * 0.5;
            p.vy = (Math.random() - 0.5) * 0.5;
            p.life = 200;
            p.size = Math.random() * 3;
            p.color = `rgba(255,255,255,${Math.random()*0.5})`;
        }

        function spawnAutoFirework() {
            const x = width/2 + (Math.random()-0.5) * width * 0.6;
            const y = height/3 + (Math.random()-0.5) * height * 0.3;
            createExplosion(x, y);
        }

        function createExplosion(x, y) {
            const colors = ['#FFD700', '#FF4500', '#FF69B4', '#00FFFF'];
            const count = 60;
            for(let i=0; i<count; i++) {
                let p = getParticle();
                if(!p) return;
                p.type = 'firework';
                p.x = x; p.y = y;
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 6 + 2;
                p.vx = Math.cos(angle) * speed;
                p.vy = Math.sin(angle) * speed;
                p.life = 100 + Math.random() * 30;
                p.maxLife = p.life;
                p.color = colors[Math.floor(Math.random() * colors.length)];
                p.size = Math.random() * 3 + 1;
            }
        }

        // äº¤äº’
        document.addEventListener('click', (e) => {
            if (animationEnded) {
                createExplosion(e.clientX, e.clientY);
            }
        });

        // ==========================================
        // 5. æ¸²æŸ“å¾ªç¯
        // ==========================================
        function loop() {
            // æ‹–å°¾æ¸…é™¤
            ctx.globalCompositeOperation = 'destination-out';
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, width, height);
            
            ctx.globalCompositeOperation = 'lighter';

            particles.forEach(p => {
                if (!p.active) return;

                // æ›´æ–°ç‰©ç†
                if (p.type === 'meteor' || p.type === 'firework') {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.05; // é‡åŠ›
                    p.vx *= 0.96; p.vy *= 0.96; // é˜»åŠ›
                } else if (p.type === 'dust') {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.life--;
                }

                p.life--;
                if (p.life <= 0) p.active = false;

                // ç»˜åˆ¶
                ctx.globalAlpha = Math.max(0, p.life / p.maxLife);
                ctx.fillStyle = p.color;
                
                if (p.type === 'meteor') {
                    // ç”»çº¿
                    ctx.beginPath();
                    ctx.moveTo(p.x, p.y);
                    ctx.lineTo(p.x - p.vx*3, p.y - p.vy*3);
                    ctx.strokeStyle = p.color;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                } else {
                    // ç”»åœ†
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            if (!animationEnded) {
                requestAnimationFrame(runDirector);
            } else {
                // ç»“æŸåçš„è½»é‡å¾ªç¯
                requestAnimationFrame(loop);
            }
        }

        // å¯åŠ¨åŠ¨ç”»
        requestAnimationFrame(runDirector);

    </script>
</body>
</html>
